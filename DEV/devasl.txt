/*
 *
 * 06-07-08  rework indirect var 
 * 05-19-08  transferSvar
 * 05-10-08  reworking getexp for cleaner transfer of RHS to LHS 
 *         - needed more robust subscript of array info storage on both sides. 
 * 04-22-08  reworked FindVar,var_ptr,var_index,VarArrayIndexs 
 * 04-19-08  wo_vtile
 * 04-16-08  started 1-4.0 version 
 * 03-16-08  reworking threads
 * 03-08-08  added break,list to debug
 * 03-05-08  isArgNumber
 * 03-04-08  fixed rangextend in dynamic array set operation I[0:30]->Set(0,2)
 * 03-03-08  sint.c -- contains functions to access internal variables, free, realloc
 * 03-02-08  CopyScalar STRV
 * 03-01-08  rework ACLASS class declare
 * 02-25-08  GetArgSiv - arg offset
 * 02-24-08  debug stack trace- ptr args rework
 * 02-21-08  rework bscan   1.3.00
 * 02-20-08  str dec, rework sscan, pcl_line
 * 02-18-08  rework CheckProcFunc
 * 02-18-08  _pargc
 * 02-17-08  const char* storeString,Dtype,...-  checkConstantExp 
 * 02-16-08  sort,reverse,shuffle SVAR
 * 02-14-08  str declaration, CO_siv
 * 02-14-08  CPS_siv - stack, CP_siv - current proc
 * 02-13-08  token->isOperator,token->isNum
 * 02-12-08  hex array dec, print j delimiter specifier
 * 02-02-08  checkContext
 * 31-01-08  STRV --- use size 1 (locked) Svar as string - copy value if arg
 * 17-01-08  LFILL
 * 15-01-08  sort,reverse,shuffle Lists 
 * 04-01-08  added Lists type to SIV
 * 01-01-08  b = $a --- b is a reference to a
 * 15-10-07  gsocket -- added gsockrecv and gsocksendto
 * 23-11-07  pass thru CL args if we are running executable script
 * 25-08-07  NIF number of include files was 5 now 15 --- needs to be dynamic
 * 28-03-07  LSIVELE --- in <<[B]" $D[0] \n"
 * 18-03-07  rework gline-wob
 * 18-03-07  rework matrix op -- 
 * 04-03-07  rework GS_SYS read
 * 10-10-06  rework getvar
 * 10-04-06  record type
 * 10-02-06  added sqlclose
 * 10-01-06  added sql query dll
 * 09-26-06  fix in sob , fix in prtexp
 * 09-26-06  Opera namespace 
 * 09-24-06  vmf substr,     added
 * 09-23-06  bugfix range.compute
 * 09-12-06  do-while/until
 * 09-01-06  rework gthreads
 * 08-14-06  rework spawn from xasl
 * 20-07-06  XYP - for Gline
 * 05-07-06  Rework ShowTerrain
 * 26-06-06  HowFar,TrueCourse
 * 22-06-06  rework Gline/Swin/GetRP
 * 20-06-06  p3D -- TerrainGrid
 * 15-03-06  cmplx Mag/Phase  version 1.2.2
 * 15-03-06  cmplx vv ops, wo plot,  version 1.2.0
 * 15-01-06  arg passing for threads
 * 12-01-06  mods-for AMD64 gcc version 4.0.0 
 * 07-01-06  PRT_EXP icode, vmf redimn, cmplx math ops
 * 12-29-05  thread mutexs, bug-fix list-expression
 * 12-21-05  gthreadsendsig
 * 12-17-05  revise gthreads
 * 12-01-05  added CheckEOF
 * 10-09-05  bugfix - use of scalloc - %,a control array delimiter csv
 * 10-09-05  vscale - SVD routines -msmooth - mcolsmooth
 * 10-01-05  bug fix scalar/vector divide
 * 09-25-05  mv_op -- matrix-vector ops
 * 09-18-05  IsColVector -- VMF Convert
 * 09-10-05  matrowcat & matcolcat
 * 08-31-05  with gcc 4.0.0 used optimize O (instead of O2) -prevent realloc runtime errors -- FIX?
 * 08-14-05  bug fix proc return in for-if construction
 * 08-07-05  Prt file handle
 * 07-31-05  ReadRecord filename or FileHandle
 * 07-23-05  getargv
 * 07-18-05  compile for paraexpansion strings
 * 07-03-05  PEX instruction
 * 05-05-05  Xstate -- compile
 * 04-21-05  svar W ; W->Read(A)
 * 04-20-05  Vmf  variables now have member functions sz=V->Caz() rather than sz= Caz(V)
 * 03-04-05 - include read for asl
 * spi rename to asl  March 1 2005  - version now 1.0.0
************************************************
 * 12-01-04 - opcode-compiler
 * 10-23-04 - labels and ooc
 * 3.1.8
 * 10-17-04 - GetPtime - time ins secs from process start
 * 10-09-04 - readrecord - ("col:<=",wcol,value) .... acceptance of record
 * 10-03-04 - reuse lstack - reduce new/delete 
 * 10-02-04 - rework msg - event reading from xgs
 * 09-26-04 - SIGCHLD handle of killchild
 * 09-26-04 - dec of char vec via quotes is param expanded
 * 09-19-04 - ReadChildMsg, ReadMotherMsg
 * 09-12-04 - ReadRecord revise
 * 09-12-04 - unique debug file use SetDebug(0,"unique")
 * 09-05-04 - siv::Store methods
 * 08-29-04 - rework of w_data
 * 08-22-04 - packv - dbp -moved gtty.c to spil lib 
 * 08-15-04 - arg passing with SpiSpawn (32 args)
 * 07-31-04 - spi modules - with pipe coms
 * 06-06-04 - popen,bg system
 * 3.0.0
 * 05-23-04 - Icode -> byte code for faster execution
 * 2.11.1
 * 05-19-04 - packb - bunpack
 * 05-17-04 - rescape - vfindval
 * 2.11.0
 * 05-14-04 - ssub - multiple pass using svar fields
 * 05-13-04 - checksum
 * 2.10.9
 * 05-07-04 - hexdec, octdec, bindec - can svar input of multiple fields 
 *          - fix store_copy_sivar 
 *          - ShowSivFlags
 * 2.10.8
 * 05-06-04 - CheckDoState() - for,while,proc
 * 2.10.7
 * 05-04-04 - optional memory checking
 * 2.10.6
 * 05-04-04 - breakout bug - rascii - use scalloc - else false memdebug
 * 2.10.5
 * 05-02-04 - WS tidy - \x in string expansion - wordexp
 * 2.10.4
 * 04-27-04 - IF - SM version
 * 2.10.3
 * 04-21-04 - CodeBlock - proc references CodeBlock
 * 2.10.2
 * 04-17-04 - CodeBlock - Filec/gthread parsing object
 * 2.10.1
 * 04-12-04 - gthread -SwhileSM
 * 2.10
 * 04-10-04 - gthread - DoOtherthreads - for, while, do
 * 2.9
 * 03-28-04 - gthread - started BIG Mutex around spi statement - round-robin - equal priority
 * 2.8
 * 03-24-04 - gsocket - gsockcreate, gsocklisten, gsockaccept, gsock{connect,close,read,write} socket functions
 * 2.7
 * 03-14-04 - gtty - sdev - serial device functions: sdevopen, sdevget, sdevread, sdevwrite, sdevset, sdevclose
 * 2.6
 * 03-11-04 - vexpand, vsplice
 * 2.5
 * 03-09-04 - signal routines sendsig, getsig - use sigaction & sigqueue - can send values <-->
 * 2-4
 * 02-26-04 - signal handle routines sighandler(routine,SIGNAL,[SIGNAL2,...])
 * 2-3
 * 12-31-03 - object array
 * 12-29-03 - multiple inheritance 
 * 2-2
 * 12-23-03 - public,private class member access
 * 12-20-03 - exclamation function stop!  ! indicates no args to call should be last char no space
 * 12-13-03 - Class member function implemented
 * 12-07-03 - Class datamember implemented
 * 2-1
 * 12-03-03 - REGEX use in ssub,spat - started
 * 11-21-03 - Object Orientated Version started
 * 1-101
 * 11-13-2003 <<" %r $A[*]"      the value(s) of SVAR variable A are printed one pre line
 * 11-13-2003 A=<"ls -l"      the listing is the value(s) of SVAR variable A
 * 6-1-2003   <<" %\ $a \n" will prevent \n translated to CRLF
 * 6-1-2003   s2= s[0]{0;3} first 4 chars of svar string to svar s2
 * 5-31-2003  B = { 0;10;2 }  declares an int array 1 dimn  elements 0 2 4 6 8 10 
 *            i.e. from start to finish inclusive if step coincides
 * 1-100
 * 5-15-2003  foo( {1,2,3}}
 * 1.99
 * 5-11-2003  Glines
 * 5-10-2003  Memblock fix 
 * 5-4-2003 - debug print options revise
 * 5-3-2003 - A[j;e] += M   - fix
 * 1.98
 * 3-4-2003 - fix wo_setrs - fix svar init
 * 1.97
 * 2-15-2003 - fix for :  I[("<",0)] = 7   
 * 1.96
 * 1-29-2003 - r_ascii fix, move to screen,switchscreen
 * 1-21-2003 - procedure reference fix
 * 1.95
 * 1-15-2003 - rotaterow
 * 1-15-2003 - dynamic typing -GENERIC type revision
 * 1.94
 * 1-4-2003 - dynamic expand of multidimension arrays
 * 1.93
 * 12-26-2002 - #{ #} comment fixed - 3D functions createscene, moveobject, rotateobject
 * 1.92
 * 12-4-2002 mem-leaks fixed
 * 12-2-2002 shm startup improved
 * 1.91
 * auto-open of DLL's
 * 1.90
 * 10-26-2002 - opera local copies of arrays - only when necessary
 * 1.89
 * 10-19-2002 Saw & Square functions, fix multi-assign
 * 1.88
 * most window calls now can use last window number as implied
 * 1.87
 * renamed to spi signal processing interpreter
 *
 * 1.86
 * 9-10-2002 - r_ascii, r_data to fio dll
 * 9-1-2002 - MinMaxI , Peaks to math dll

 * 1.85 
 * 3-1-2002 - rework of all malloc/free operations
* 1.84
* 1-1-2002  - rework interpretor to give intermediate code
* 12-7-2001 - added Ceil,Floor
* 12-6-2001 - SetRGB
* 12-5-2001 - Mdimn
* 12-4-2001 - Rework of PlotLine,PlotPoint
* 1.83
* 11-22-2001 - Sel array/scalar comparison to give integer array of selected elements
* 11-19-2001 - lset,lsize for extraset reference of array elements A[I[*]] += 1
* 11-18-2001 - Cmp array comparison
* 11-17-2001 - Grand/Urand random functions
* 11-15-2001 - matrix inversion
* 1.82
* 4-15-2001  - added seek_line for positioning at start of any line in file
* 4-15-2001  - split up into shared libs (ap,dsp,gspf,wcom,gscom) and dynamic libs (audiolab,imagelab,math,tran)
* 4-12-2001  - ap_cmp for SINUM GT,GTE,LT,LTE arbitary precision now in shared library libap
* 4-8-2001   -  linked in readline
* 4-7-2001   - Dll_open,Dll_close to access dynamic libs
* 4-2-2001   - sip spawn XGS for xterm command line of plot operations
* 2-23-01    - compile with gcc -2.95.2   (ftime used now instead of gettimeof day)
* 2-20-01    - matmul and other array operations for SINUM
* 1.81
* 2-9-01     - array subscripting   D=C[2;5] or D=C[a,b,c] or D=C[B]] where B is array and recursive as D=C[B[2;5]]
* 1-*-01     - use of C++  class Siv and Svar with member functions
* 1-1-01     - added opera_div_sv   B=1.0/A where A is a vector B is vector of result 
* 1.80
* 12-31-2000 - PTR type pointers to arrays, $ is dereference, can do ++,-- on pointers
* 12-26-2000 - moved some w_ functions to operate via SHM
* 12-23-2000 - NaN error detection -  changed function table calling of tran functions 
* 10-28-2000 -
* 1.79
* 6-20-2000 - matrix multiplication added   C = A ** B    ( int A[2][3] , int B[3][2])  C is [2][2])
* 6-15-2000 - arrays can be manipulated via arithmetic operations  A = B * 3   C = A + B , where A,B are arrays
* 6-1-2000  - template instructions
* 1.78
* 4-11-2000 - scope resolution  ::a (main a)  :b make local - used  :b= 1 - autocreate local (other than int b; b =1;)
* 4-10-2000 - num->sivar - sivar number string ok to eval as array index
* 4-1-2000  - shared memory xgs <-> sip 
* 3-29-2000 - C++ (g++) compile complete - (can't link in readline yet) - OO design start
* 1.77
* 
* 3-23-2000 %v$vname in << statement will print vname value - the format v flag needs to go before others for this feature
* 3-23-2000 added NAND and bitwise XOR ( but because I use ^ as raise to power operator have to use ^^ as bitwise XOR 
* 3-22-2000 allow expression eval in print operator << "$a $(4*7) %6.4f$(4.5*7.68) \n"
*           - (does not apply to sinum yet  but %r will output sinum according to its radix)
*           as specified via preceeding fmt as defined in C language 
* 3-21-2000 format print added e.g. <<"%6.2f$fn\n" the float number fn is formatted into output string 
* 1.76
* 3-20-2000 list usage :  G= "laser_scr(@0)" ;  @G(@0,lw,pw,Spw,Twin,Ele_w) ; sfree(&G) ;
* 3-20-2000 iteration construction :   sinum x=2; C="@0=@0*@0*@0" ; @C'30("x")
* 3-20-2000 added template instructions G="@0=@1+@2" called as @G("x",4,5) ; 
* 1.75
* 3-20-2000 added step -through debugging - option to execute an instruction, skip, stop on error
* 2-28-2000 type promotion/demotion in expr parsing
* 2-28-2000 arbitary length numbers stored and parsed in SINUM format 
* 2-27-2000 input number as e format  e.g. -21.56789e-23  
* 1.74
* 2-19-2000 revise ap_math routines - added ap_sqrt
* 1.73
*          offset and bounds are passed - so shouldn't be able to overun within procedure
*          arrays by reference only. Use -  foo (char x[], int y[])  -  foo (&a[0],&b[10]), 
* 2-3-2000 proc arg call - by value, or by reference foo(x,y) or foo(&x,&y) can be called either way
* 1-25-2000 placement of {} around if, for , while now more flexible
* 1-20-2000 multistatements per line - terminated by ;
* 1-5-2000 added debug options to write out proc call and args DEBUG_PROC_ENTRY DEBUG_PROC_ARGS
* 1-3-2000 AP operations ++/-- == added (bug fix of apsub10
* 1.72
* 23-12-99 sivar variable becomes dynamic array of varchar
* 20-12-99 dynamic arrays
* 1.71
* 12-15-99 redone argument parsing (arbitary length, arbitary number as dependent on memory availiable)
* 12-1-99  added ^=  @+ @- |& operators 
* 11-30-99 set_precision sets number of places after dec point (need tran functions in AP)
* 11-9-99  added arbitary precision AP mul,add,sub,div works in radix 256
* 1.70 
* 10-27-99 added another Balance condition to ANN - any output unit can be favored
* 10-27-99 removed incf from proc structure - bug fix in serror related to src_file of proc
* 1.69
* 10-25-99 procedure variable compound name - hash of proc name + 16 char variable name
* 10-19-99 args and white-space tidied up in passing via send_func to GWM
* 10-14-99 Unary operation minus bug 
* 10-14-99 args delimited by null chars 
* 1.68
* 10-8-99 auto create SIVAR s in scpy(&new,&old) 
* 1.67
* 10-5-99 char * get_arg_sptr()  used to decode str args 
* 10-5-99 arg tags used code strings and addresses
* 10-1-99 ofw,ofr
* 1.66
* 9-29-99 sivar now use dynamic storage
* 1.65
* 9-27-99 reworked quoting of arg list
* 1.64
* 9-26-99 added checkscpy for strcpy abc checksscan for scan input strings
* 1.63
* 9-23-99 using readline GNU lib for cl edit and history
* 9-22-99 include files - exit_si end line auto added
* 1.62
* 9-21-99 sp_ann - ann structure reworked 
* 9-21-99 bug fix a=b=c=d=0 (this was preventing  error reporting of undeclared variables)
* 9-20-99 set_maxerrors (in script before it quits- default 3)
* 9-20-99 redone ann.h header write_net,read_net_wts
* 9-10-99 added v_tanh, get_nodes_layer
* 9-8-99 added get_df_hdsize 
* 9-4-99 added julday - julian day from mon,day-of-month,year (1999) 
* 1.61
* 9-3-99 vv_m can be repeated -cycled by shorter mul vector m times sp_vv_m(x, y, z, n, s1, s2,m)
* 9-1-99 added sele  str operations to get n element of a string  e= sele(str,n)
* 8-27-99 can have more then four-layers in net (need to revise write/read net 
* 8-26-99 get_net_act - return string activation function
* 8-25-99 da4 logger format
* 8-25-99 buf fix char type assignment
* 8-19-99 func hash table written to WORK/stable
* 8-19-99 free_net 
* 8-18-99 check_parc_count
* 8-18-99 add_node,prune_conn,set_conn
* 8-15-99 revise set_net_arch
* 8-14-99 bug fix on else if (foo()) {
* 1.60
* 7-15-99 sort_labels - order_tokens (deletes duplicates)
* 1.59
* 7-9-99 add \t as tab in print command
* 7-9-99 add get_net_ss (sp_ann.c)
* 7-9-99 fix back_up_a_line
* 1.58 
*  =- =+ =*  not defined double operators correctly parsed : b =-4 b =+4 correct
* "-" bug fix
* 6-1-99 sp_ann code now allows flexible wiring of nodes via wire_nodes 
* v_realloc bug fix for ascii type variables
* 1.57
* 5-16-99 read/write on xgs/sip pipes revise for wait and read/write checking
* 5-1-99  y2k date format now year format good y10k
* 1.56
* 3-3-99  test_vars_cw set_vars_cw (was test_cw) - cw for SI_VAR
* 3-3-99  v_realloc (won't work for multidimension arrays yet)
* 2-19-99 added GS_BOX and GS_LINE 
* 2-18-99 command-line args parsing revised
* 2-17-99 added sp_ann code to run nets via script ( should be a library)
* 2-15-99 wcom revision - changed Msg header graphic routine added to Msg header , also target win and wo
* 1.55
* 1-16-99   header now -- GASP size_in_bytes -> END_HEADER
* 1-16-99   fix r_words ascii W[1024]{725} now knows size of ascii variable (default 512)
* 1.54
* 11-17-98  bug-fix check-brace in back-quoted string
* 11-16-98  bug-fix delimiter parse (=
* 1.53
*            but  a= (b >= c) should flag b uninitialised;  b would be a null string if not created prior  
* 11-15-98  a= (b = c) ; vars on LH are created if unknown i.e.  a = b =c even if a and b not created before 
* 11-6-98  <" ls *.vox "   equiv to command(" ls *.vox ")
* 11-5-98  cl arg numbering $0 script-name $1 first cl arg 
* 10-30-98 added set_f_error, clr_f_error to set file status for a file handle (0 OK, other error EOF)
* 10-30-98 added f_error to check file status for a file handle (0 OK, other error EOF)
* 1.52
* 10-23-98 char array string declaration, array list declaration int A[] = { 1, 2, 3}
* 10-15-98 fixed recursion bug - scope name incorporates recursion level so local values not destroyed in recursion
* 1.51
* 10-12-98 parameter expansion in strings " $var " expands value of var into string
* 10-2-98  count_labels count the number of identical tokens
* 9-24-98  isdigit to check whether sivar holds number string
* 9-24-98  str_cpy to sivar preserves spaces, i_read_str returns line without the newline char
* 9-14-98  proc (define) array-bug in procedure call fixed
* 6-28-98 fixed get_exp_in bug (problem with matrix nested expressions )
* 1.50
* null strings dealt with in sip
* 1.48
* debug pid - N_errors reported - func_not_found now a reported error
* 1.47
* alien frame read
* ENDIAN stuff
* 1.46
* if - else if - else construction 
* ++/-- added but postinc not implemented
* 1.45
* 3-4-98 paint_labels - plot if any part in window
* 1.44
* 12-25-97 tack on ff=exit_si() to mark end of code
* 12-25-97 CODE_DB_SI_VAR
* 1.43
* 12-19-97 bug in search_label_time -closest mid_pt
*          is first in msg header
* 12-19-97 attempt to keep track of lost messages after TIME-OUT(magic number
* 12-19-97 changed dbug file to name instead of pid
* 12-18-97 added continue statement
* 12-14-97 bug-fix malloc view_mcs
* 1.42
* 12-04-97 view_mcs - remote file (rd_ascii)
* 1.41
* 11-22-97 use memp in SI_VARS - redid free arrays in procedures
* 1.40
* 11-21-97 si_free -not freeing up array's ( fixed num of SIVARS ?)
* 11-21-97 get_gs_HOME
* 1.39
* 11-15-97 recover_bquote bug fix
* 11-15-97 added reload_src feature to interactively reload code
* 1.38
* 10-06-97 v_symbol
* 10-06-97 n % 0 (bug fix)
* 10-06-97 v_frand
* ascii type can set wordlength in arrays e.g. ascii W[100]{50} wordlen 50
* 1.37
* conditional vv_copy
* m_sort
* sip error line
* 1.36
* 07-25-97 fixed bug in array bound spec A[n * 2 ]
* 07-25-97 v_read returns n of objects read
* 1.35
* 07-18-97 added get_exp in array bound spec , e.g. A[n*2]
* 1.34
* added get_df_para
* 07-02-97 find-menu precedence search
* 1.33
* 05-08-97 fixed str_cpy, added str_ncat
* 1.32
* 05-01-97 fixed sip remove dbug file (has include start dir in path)
* 1.31
* 04-28-97 fic read_channel_file - error in nvals when averaged
* 1.30
* 04-11-97 bit shift operators >> << added
* 04-03-97 RMT and RLT wrong counts in mesg count (fixed ?)
* 04-03-97 added GS_WOTEXT
* 1.29
* 04-01-97 revised get_wrds
* 1.28
* 03-31-97  fixed rwl_file from end bug
* 03-27-97  fixed v_write bug for int
* 1.27
* 03-15-97  fixed byte_order  (bug) get_channel_para, get_byte_order
* 1.26
* 03-05-97  asr_net_input -array size bug
* 02-11-97  sip script file fsize silent
* 1.25
* moded asr_gen_net_input to do word tokens
* 01-30-97  added hsx,hsy shift center to plot_symbol
* 1.24
* 01-29-97  added get_script_dir
* 01-29-97  finetime - calls gettimeofday
* 01-26-97  get_script_dir
* 1.23
* 01-26-97  mod to wcom_gs (write to char buf before pipe write)
* 01-21-97  mod to asr_gen_input
* 01-21-97  vv_smooth
* 1.22
* 01-03-97  +=,-=,*=,/= operators added to sip
* 12-21-96  added char-ascii short-ascii to v_write
            get_channel_para
* 12-13-96  fixed bug in read_channel_head error return for 
* 11-26-96   v_write,v_read auto-detect internal type
* 1.21
* 11-25-96   fixed bug in read_signal_array
* 11-25-96  added check_file_type to inspect header
* 11-15-96  GS_EOF to allow read_chn to check eof and return items read
* 11-15-96  hdrprintf (to allow changes to header-set field length)
* 11-05-96  r_words
* 10-29-96  gs_pad_header size to 64,"    ...
* 10-28-96  added a dbprint for sip dbprint([1,0],"    ...
* 10-27-96  plot_chan - default not to use break-value added extra para ubv
* 10-25-96  added extra message to serror to show name of variable undef,etc
* 1.20
* 10-25-96  can include \n in o_print e.g. o_print("ret\n")
*           can now test string NULL
* 10-25-96  str_pat now has two extra parameters match and charremaining 
* 1.19
* 10-23-96  up CL_args and length
* 10-21-96  version.c,v 1.19 1996/10/22 15:40:08 mark Exp mark $";
* 10-21-96  changed si_pause to use wc_wait si_sop.c & sig.c
* 10-21-96  upped buffer size to VRMLT in view_mcs ed_sigdraw.c
* 10-21-96  upped buffer size to VRMLT in gs_plot_chn dfplot.c
* 10-21-96  changed Wait-interval down to .001 from .4 (big speed up) maybe pipe write blocking now? wcom.c
* 10-21-96  added comparison condition to v_stats
* 10-20-96  added read_signal_array (deleted read_signal_buffer)
* 10-20-96  bug fix v_read (short->float)
* 10-14-96  read_chan average bug  
* 10-14-96  paint_labels will put label if mid-label is in window 
* 10-10-96  added char to v_read,v_write 
* 10-5-96 fixed bug in parse_args 
* 10-2-96 added get_argc 
* 9-26-96 fixed init array bug in read_frame averager 
* 9-3-96 added include files - so we can have "libraries" 
* added delta frame spacing - si_df.c 
* line numbering in debug mode now consistent 
* added break statement - fixed empty line else bug 18-7-96 
* added get_rcs_id and get_script (info on script rcs version) 15-2-96 
* fixed get_env bug 14-2-96 
* but needs a mod for rcs to accept 
* check in/out when releasing new versions of sip 
*
*/


02/16/08

      reverse,cat to work on SVAR,STRV
      shuffle works on SVAR
      sort (bubble) works on SVAR


      char dv = { 'o', 65, 66 }
      not working in XIC -- need token->Constant -- andor WriteIC at end of GetExp


02/17/08

      added token->checkConstantExp fixed       char dv = { 'o', 65, 66 }
      fixed copy_args shift

      tried -- looking though debug args for NULL ptrs before print - va_start(ap) 
       could not get that to work

      BUG 1 
        {
         pre_inc - opera 
        }


      modded FindStateLen --- should see CODE_BLOCK_END as EOS if not in comment or range/list expression

      made many functions char*   --- const char* supposedly to prevent inadvertent alterations
 
      increased test suite scripts master script is  ASL_TEST_VER in TEST/ITOC

      added getArgs() returns svar array -- interpreted line OK  XIC does not work - now FIXED 
      (problem with get_CLarg(i) ??)


02/18/08

      scalar variables - size 1 -- always realloc if memp 0
      
      make flags -c -w   parse as -cw  ( done -- just a hack for  -c -w -cw or -wc)

      setting ele of arrays other than int -- store conversion was opting out if store type < result type

      proc arg for calling array ele was being set to an array instead of just value

      updated ASL test suite 

02/19/08

      modified checkprocfunc -- busted looking for foo! stop! i.e. shorthand for no args in function
      object array not parsed correctly
      fixed checkprocfunc 
      want to use doxygen in ASL func -- extract to manual
      1.2.97  n 264 fail 3 pass 261 pcc 98.863636% 

02/20/08    

      sscan(str,"\%f \%d",&k,&d) --- passes the vars to called function not their values and the sscan
      does format them into the supplied variables - have to escape format specifiers

      BUG 2 
        {
          sscan(str,"%f %d",&k,&d) --- crashes since the string tries to paraexpand 
        }

      BUG 3 
        {
          sscan(str,'%f %d',&k,&d)  --- doesn't pass fmt correctly  to sscan 

          fix --- reworked single quote parse
          FIXED 
        }


      fixed bug in 
      param_setup_fmt -- used char ptr to get at string inside Svar -- this should be private
      so we only  manipulate using methods 
	    //*vp++ = *p++;  // get the escaped char
            pes->cset(*p++,jj++,0);
      need to go through engine code and check all instances of (char *) make sure we doing unprotected
      char manipulations - way too many risky accesses
      now running ASL test suite to check each minor version - need to autoarchive minor versions
      1.2.98  n 264 fail 3 pass 261 pcc 98.863636% 

      FIXED str dec     str s = "hey baby"

      tried to put in svar routine cCmp, cCmpinc --- got realloc problems
      1.2.99  n 264 fail 3 pass 261 pcc 98.863636% 

02/21/08  pef string " %3d $d "  paramexpanded and formatted DQ --
          literal string no paramexansion  ' %f   $s  '  not processed left as is
          character constant 'a' or '\''
          above are being used inconsistently in declaration - initialization statments
          char dv[] = { 'a', 'b' , 'c', '"' } should be same as
          char dv[] = { 'abc"' }
          str  s =  "abc\"" ;
          str  s =  'abc"' ;
                foo ('a', 'abc"', "abc\"")


02/22/08  revised declare for literal strings
          reformated swap_32word -- for use in bscan

02/23/08

        TBD 1 FIX IC version of array implied subscript         IV = YV[a+1::c+1]
        the range spec init:end:step where we have init::step  the missing end 
        -- means the end of array
 
        In initialization of char array
        char lv[] = { 'ABCDEF' }
        the initial size during declare is now set to 1 -- thereafter dynamically expanded to fit
        it was originally set to 10 -- this was a  bad choice 
        1.3.00  n 308 fail 3 pass 305 pcc 99.025974% 

        proc arg not overiding main var of same name -- var_sindex should be recoded
        FIXED var_sindex for now
        added S-FUNCTIONS section to ASL test suite now we will test each (& every) script function
        sscan is the first
        1.3.00  n 326 fail 1 pass 325 pcc 99.693252% 

02/24/08

        added Svar stack variable to debug so can see stack trace
        reworking ASLVAR_REF so that ptrs to SIV work in ASL Functions -- in XIC version
        added checkArgPtr()  --

02/25/08  
          process_args and Sfunc - reworked for  Siv ptr args (Siv and offset)
          The cw and Siv offset are placed on IC SlotStack so that the configuration can be recreated
        1.3.02  n 330 fail 1 pass 329 pcc 99.696970% 
          Need to expand Svar internal string member functions !

02/26/08  reworking sop  for STRV type  
        1.3.06  n 330 fail 0 pass 330 pcc 100.000000% 

02/28/08  objsivp  IC
          class/object  declaration  ---    say   obj A;  fails   
 
          GetSiv in icode needs revision - it does too much via name 
          -- the variable sought is nearly always
          available by slot reference -- internal sivs - may need own table

03/01/08

          Class define and declare ACLASS XIC
          1.3.07  n 333 fail 0 pass 333 pcc 100.000000%
          rework ASL stepping debug 

03/02/08  fixed CopyScalar for STRV   type

03/03/08
          Need to fix parse of if ( a > 0 && b > 1) 
           if ( (a > 0) && (b > 1))   is OK check  precedence && ||
          rework julday
          Need to fix dynamic array declaration int I[] , int I[20+]
          moved internal var check,resize, free ops to spil/sint.c
          want to add   AND,OR, XOR as function words for logic ops

          BUG 4 {
                 in XIC of <<" $C[0] \n"
                }

03/04/08  BUG 5 --- code must end in empty line -- XIC


           fixed I[0:30]->Set(0)
           BUG 6 {
                  LH_EVAL  in setting I[0:5:1]  range set info not stored/exe correctly in XIC -- 
                 } FIXED

           1.3.10  n 353 fail 0 pass 353 pcc 100.000000% 

03/05/08   isArgNumber
           <<"arg [${i}]  ${_clarg[i]} \n"  -- fails as XIC -OK as first pass
           want " %10\txxx r $A \n"  to print vector A in row length 10 with pefix tabxxx as first chars on line
           can we do a row post fix too
           done   the string %nxx,yyr  parsed as pre and post row strings <<"%\\t{\\s\,\\s},r%3d$A \n"

03/06/08   objcopy  -- callv,procv as object refs rework values??

03/07/08   BUG 7 {
                  obj1->v = obj2->v  STORE XIC
                 }

03/09/08   XIC StoreSiv GetSivp --- storing ptr to siv doesn't work to retrieve class members why??
           The WriteIC --- pts correctly  but in compiled version the stored ptr isn't valid since this variable
           is dynamically created -- would have to redo it the first time in XIC ??
           BUG 8 { 

                 where XIC requires line before Stop! to proceed with any last loop statement

                 }

           TBD 2 Icblock - are we overwriting sivp info/ptr ?? should be moving on sizeof(ic) plus stored constants

           1.3.15  n 379 fail 4 pass 375 pcc 98.944591% 
03/10/08    print of object, values -- list methods? needed
03/11/08   xic cat_tid  type/id print  -- fixed createv str type (was defaulting to SVAR)

           BUG 9 {
                 members of member function obj of same class - looking at original table- instead of member values??
                 }

03/12/08   check storer --- redundant destination processing??
           validated PUSH_OBJ
           current ASL tests:

  DONE: : basic_ops.asl        :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : ./basic_ops          :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : declare1.asl         :tests   18 :    0 :Pass   18 :score  100.0% 
  DONE: : ./declare1           :tests   18 :    0 :Pass   18 :score  100.0% 
  DONE: : chardeclare.asl      :tests   12 :    0 :Pass   12 :score  100.0% 
  DONE: : ./chardeclare        :tests   12 :    0 :Pass   12 :score  100.0% 
  DONE: : sexp1.asl            :tests    9 :    0 :Pass    9 :score  100.0% 
  DONE: : ./sexp1              :tests    9 :    0 :Pass    9 :score  100.0% 
  DONE: : if0.asl              :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : if4.asl              :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : ./if4                :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : for0.asl             :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./for0               :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : while0.asl           :tests   15 :    0 :Pass   15 :score  100.0% 
  DONE: : ./while0             :tests   20 :    0 :Pass   20 :score  100.0% 
  DONE: : do1.asl              :tests    5 :    0 :Pass    5 :score  100.0% 
  DONE: : ./do1                :tests    5 :    0 :Pass    5 :score  100.0% 
  DONE: : do0.asl              :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : ./do0                :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : arrayele0.asl        :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : ./arrayele0          :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : arrayele1.asl        :tests   15 :    0 :Pass   15 :score  100.0% 
  DONE: : ./arrayele1          :tests   15 :    0 :Pass   15 :score  100.0% 
  DONE: : arraysubvec.asl      :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./arraysubsref       :tests   14 :    0 :Pass   14 :score  100.0% 
  DONE: : arraysubsref.asl     :tests   14 :    0 :Pass   14 :score  100.0% 
  DONE: : ./arraysubvec        :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : dynv0.asl            :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : ./dynv0              :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : lharraysubsrange.asl :tests   12 :    0 :Pass   12 :score  100.0% 
  DONE: : math                 :tests   12 :    0 :Pass   12 :score  100.0% 
  DONE: : func0.asl            :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./func0              :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : procret0.asl         :tests   11 :    0 :Pass   11 :score  100.0% 
  DONE: : procarg.asl          :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./procarg            :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : fact1.asl            :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : xyassign.asl         :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : ./xyassign           :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : svar1.asl            :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : ./svar1              :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : sscan0.asl           :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : ./sscan0             :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : bscan0.asl           :tests    2 :    0 :Pass    2 :score  100.0% 
  DONE: : ./bscan0             :tests    2 :    0 :Pass    2 :score  100.0% 
  DONE: : inewton0.asl         :tests    1 :    0 :Pass    1 :score  100.0% 
  DONE: : ./inewton0           :tests    1 :    0 :Pass    1 :score  100.0% 
  DONE: : class1.asl           :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./class1             :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : mh.asl               :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./mh                 :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : obcopy.asl           :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : ./obcopy             :tests    6 :    0 :Pass    6 :score  100.0% 
  1.3.18  n 381 fail 0 pass 381 pcc 100.000000% 


03/14/08   started gthread revision

03/15/08   foota  returns double array so we can check arg expression parsing
           (return svar if args are strings??)
           thread0.asl XIC fails
           moved strLen to pf.c
           tidy of DBP statements 
03/16/08   BUG 10 {
           XIC of thread - procs -- statement end parsed -- it does a hard exit
           }

           this had the effect of generating ic code with scope of main

           the intial proc where the thread starts -- never gets fully parsed


03/17/08   if both ops int - do int math

           BUG 11 {
             if multiple logic ops  -- needs brackets and condition
 
  if ( eidpn == port_n || showall) {  // FAILS
  if ( (showall == 1) || (eidpn == port_n) ) { // OK
                  }


04/8/08   if both ops uint - do uint comp -- scale_compare in opera_e needs checking
          1.3.23  n 403 fail 0 pass 403 pcc 100.000000% 


04/16/08  branched 1.4.0 version -- rework GetExp -- let C take care of recursion 
          want each GetExp to have its expression context for better parsing of
          array expressions   A[(a+b) * B[(c*d)] and &C[(a+b) * B[(c*d)] ,etc

04/20/08  BUG 12 {
                   buildarrayexp -- XIC  -
                 }

	  rework wo_vtile pad is optional arg and it coors are fractional window values

          gline HIST does not work, need a missing value don't plot for gline symbol
          transcendental functions promote float arrays to double - Ok to do calc in double precision
          but if initial spec of array was float it needs to stay there

          

04/21/08  fixed ptr arrayexp XIC 
          1.4.1  n 415 fail 0 pass 415 pcc 100.000000 

04/23/08  plot symbol rework size,angle,fill
          
05/10/08  rework of getexp --- lhs store subsciption (if any) and rhs stores into lhs result as determine by the
          subscription

          paraexpand --- XIC PUSH_SIV for array only if not prior indexed or subscripted
          reallocMem  ---- clear any additional memory if memory has increased

05/18/08  
          BUG 13 {
            \n" not seen has to have WS e.g. \n "
          }


	  add Varcon expression context to GetExp  1.4.6
          convert GOTOs  to try ---> catch block if_e

          

          PTR_ADDR, in function args e.g. foo(&k,&j[10]) not being processed correctly

           prog                Interp        XIC

           bscan0	       Y	     N
           inewton0.asl	       N	     N
           class1.asl 	       Y	     N
           mh.asl  	       Y	     Y
           obcopy.asl	       Y	     N


05/19/08   BUG  14 {
                     <<"%i$col[2:6] \n" col is svar  range printed not correct
                   }

           BUG  15 {
                   int won = getByteOrder()     init by function broke
                   }

           prog                Interp        XIC

           bscan0	       Y	     Y     ----- SIVOFFSET array_e
           inewton0.asl	       Y	     Y
           class1.asl 	       Y	     Y
           mh.asl  	       Y	     Y
           obcopy.asl	       Y	     N
           oa.asl	       N	     N



05/20/08   BUG 16 
              { 
                  check if --- break 
              }

           BUG 17 
             {   
                 can't use \r to insert r into pre/post fix print row ?? dont %r use %R ??
                \r means CR 

             ?FIXED
             }




           serror revise

05/21/08   BUG 18 
             {
               -- broke func arg for array -- sv_arg should point to array - unless its a subscript
             }

05/22/08   BUG 19 
             {
               --- broke   I = Igen(10,0,1)  -- for init of I vector

             }

05/24/08   BUG 20 
             {
             if (do_all || do_bops) {    fails --- multiple logic ops
             FIXED
             }

05/25/08   BUG 21  
             {
                indirect var $a = 8   and v = $a    broke

             }

           exp/rdp rework so far gives

  DONE: : basic_ops.asl        :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : declare1.asl         :tests   18 :    0 :Pass   18 :score  100.0% 
  DONE: : chardeclare.asl      :tests   13 :    0 :Pass   13 :score  100.0% 
  DONE: : sexp1.asl            :tests    9 :    0 :Pass    9 :score  100.0% 
  DONE: : if0.asl              :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : if4.asl              :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : if5.asl              :tests    1 :    0 :Pass    1 :score  100.0% 
  DONE: : if6.asl              :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : for0.asl             :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : while0.asl           :tests   15 :    0 :Pass   15 :score  100.0% 
  DONE: : do1.asl              :tests    5 :    0 :Pass    5 :score  100.0% 
  DONE: : do0.asl              :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : arrayele0.asl        :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : arrayele1.asl        :tests   18 :    0 :Pass   18 :score  100.0% 
  DONE: : arraysubvec.asl      :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : arraysubsref.asl     :tests   14 :    0 :Pass   14 :score  100.0% 
  DONE: : dynv0.asl            :tests    7 :Fail    2 :pass    5 :score  71.4% 
  DONE: : func0.asl            :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : func1.asl            :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : procret0.asl         :tests   11 :    0 :Pass   11 :score  100.0% 
  DONE: : fact1.asl            :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : svar1.asl            :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : sscan0.asl           :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : bscan0.asl           :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : inewton0.asl         :tests    1 :    0 :Pass    1 :score  100.0% 
  DONE: : class1.asl           :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : mh.asl               :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./basic_ops          :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./declare1           :tests   18 :    0 :Pass   18 :score  100.0% 
  DONE: : ./chardeclare        :tests   13 :    0 :Pass   13 :score  100.0% 
  DONE: : ./sexp1              :tests    9 :    0 :Pass    9 :score  100.0% 
  DONE: : ./if4                :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : ./if5                :tests    1 :    0 :Pass    1 :score  100.0% 
  DONE: : ./if6                :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : ./while0             :tests   20 :    0 :Pass   20 :score  100.0% 
  DONE: : ./do1                :tests    5 :    0 :Pass    5 :score  100.0% 
  DONE: : ./do0                :tests    8 :    0 :Pass    8 :score  100.0% 
  DONE: : ./arrayele0          :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : ./arrayele1          :tests   18 :    0 :Pass   18 :score  100.0% 
  DONE: : ./arraysubvec        :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./arraysubsref       :tests   14 :    0 :Pass   14 :score  100.0% 
  DONE: : ./dynv0              :tests    7 :    0 :Pass    7 :score  100.0% 
  DONE: : ./func0              :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./func1              :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./procret0           :tests   11 :    0 :Pass   11 :score  100.0% 
  DONE: : ./fact1              :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : ./svar1              :tests    4 :    0 :Pass    4 :score  100.0% 
  DONE: : ./sscan0             :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : ./bscan0             :tests    6 :    0 :Pass    6 :score  100.0% 
  DONE: : ./inewton0           :tests    1 :    0 :Pass    1 :score  100.0% 
  DONE: : ./class1             :tests    3 :    0 :Pass    3 :score  100.0% 
  DONE: : ./mh                 :tests    3 :    0 :Pass    3 :score  100.0% 
  H.4.11  n 373 fail 2 pass 371 pcc 99.463807 

05/26/08     reviewed subscript   A[0:10:2] = 7
             A[0:-2:] = 8 -- -2 means penultimate element -1 is the ultimate last element, 
	     -3 antepenultimate, ...

             I[-1]  array elements can be referenced  with neg indices ultimate -- last slot -- 


05/27/08     H.4.12  n 409 fail 4 pass 405 pcc 99.022005 
             n = 3 ; wt ="n" ; $wt = 2   --- n contains 2

06/06/08     gterm -- for xasl (reactivate stdout of asl to gterm - if xasl active)

06/07/08     REQ 0 
               {
             extract DBP --- to .db file  -- e.g. scope_e.c --> scope_e.db
             use script adbs.asl to reinsert (all functions or per function basis)
             H.4.15  n 443 fail 4 pass 439 pcc 99.097065 
               }

06/13/08     class member bug (dec v def)
             asl -cwl xxx  should use xxx.asl if there else xxx

06/14/08     
             REQ 1
               {
                  multiple inheritance activated ---    
                  loops through the base classes
                  not checked -- duplicates classes, calling specific member functions

               }

             BUG 22  
               {
                class A ;   A a;   (picks up ; as part of name??) (check state_e.c - did a reformat)
               }

06/15/08     added chem.c   periodicName,periodicSymbol

             BUG 23 
               {

                %s print and $(foo(i)) needs a space after function bracket?
               }


             BUG 24 
               {
               need to always tack on ; as last statement
               FIXED 08/02/09
               }


06/21/08     Helium version start

             He.H  n 447 fail 0 pass 447 pcc 100.00
 
             REQ 2
               {

                needs interactive debug (eclipse??) 

               }

             REQ 3
               {

                  rework threads 
                  check thread-safe

               }

             REQ 4
               {
                DSP library --- audio
               }

             REQ 5 
               {
                DSP library --- HMM 
               }

             REQ 6 
               {
                 Astro library
               }

             FUN 1
               {
                 B=readfile(A,[nlines],[skip])
                 svar contains all lines
                 done 6/23/08
               }

             VMF 1
               {

                S->len()

               }


             BUG 25 
               {
                   forever   for (;;) { }
                   Fix by allowing test to be null for_e.c ??
                   ?FIXED
               } 


             BUG 26 
               {
                    pre/post inc/dec order in args -- should be after arg use
               }

             BUG 27
               {
                    main variable overshadowing class local variable - BAD!!
               07/12/08 FIXED 
               } 




06/28/08 
           what is our 'this' ptr mechanism??  ??
           7/15/08 this->x

07/04/08
           He.Be  n 435 fail 0 pass 435 pcc 100.000000 
               


07/07/08
           ptrs to objs  revise


07/13/08
           2.7  n 417 fail 0 pass 417 pcc 100.000000 

07/17/08
             REQ 7 
               {
                  parameter check - overloaded function names
                  optional parameters
               }           

           2.8  n 423 fail 0 pass 423 pcc 100.000000 

09/12/08    fixed recast bug
09/13/08    matrix print bug, matrix LHS set bug M[10][4] ; W[4] ;   M[0:2][1:3] = W[0:2]
09/14/08    fixed matrix LHS set bug (but we end up creating a vector of indices rather than
            a subset via rule)

10/11/08    REQ 8
               {
                check we can have a list (and or array of File handles for print)
                <<[A,1,B]" this goes to files with handles A,1 sdout, and B \n" 

               }

10/17/08    BUG 28
              {
               // FIXME <<" $F[3:7] \n"
                 not working in XIC

              11/15/08 FIXED 
              } 


10/17/08    REQ 9
              {
                
			found=findval(V,val,sindex,findex,direction)
sinfo findval 

found=findVal(V,val,&rindex,sindex,direction)
found=V->findVal(val,&rindex,sindex,direction)
searches vector V for a value --- rindex is set to index where val equals element value.
if not found , routine returns zero.
sindex (default 0) is starting index for search - direction 1 is towards higher elements,
direction -1 is towards lower elements,

sindex -1 is last element in vector.
sindex -2 is penultimate element in vector ...



                        done 2.15
  --- need cmpVal where <,>,<=,>=, == conditions are search criterion
              }


11/03/08
         REQ 10
            {

               check we can use variables in fmt statements
               %$n\nR    where $n is number of cols before new line
                --- we  use  <<" %($n,$pre,$arraysep,$post) $Array "
            }  DONE

11/17/08    BUG 29
              {
               // FIXME <<"%6.2f%v = $F[3:7] \n"
              
                 not working in XIC
                 problem with where name via %v is put in string
                 
              } 


           REQ  11
              {

                buttons should send over name,value,,,,
                now they do
              } DONE


11/22/08    BUG 30
              {
               // FIXME <<"%6.2f%v = $F[3:7] \n"
               "//"  arrives as NULL
                 not working in XIC
               problem with where name via %v is put in string
                 
              } 

             added findVal  for Svar  returns vector of fields where strings are same
             would like to add regex match


11/29/08    BUG 31
              {
                "%2d $B \n"
                  fmt not applying to all elements of vector/matrix
                "%4\nR%2d $B \n"
                 11/30/08 -- number format comes after a row format
                 ?FIXED 
              } 



11/30/08    BUG 32
              {
                icode version of OpenDll
              }



12/07/08   2.19 Potassium  ntests 461  fail 0 pass 461 pcc 100.000000 % 



12/11/08   REQ 12
            {
             want enum to work  ---- array of ints
             need name, int  enum name --- scope has to check for enum member
             scope works like main -- but we insert integer constant for
             subsequent use --- the memory for the constants we hold in a enum siv
             vanilla enum DONE 4/18/09
            }

12/14/08
            fixed isdel bug - was seeing -> as -

            failing mh,sh class because not calling member functions r->getfloors()


           2.20 Calcium  ntests 470  fail 4 pass 466 pcc 99.148936 % 


12/27/08
           logic if multiple tests fail   a && b


12/29/08   proc pass in objects

12/29/08   BUG 33 {

             declare char array - XIC not storing 'G' as char
            12/29/08 FIXED 
           } 

12/30/08   added consts -- TBD 3 const STRV,SVAR arrays

12/32/08   GetND --> getND  SetND --> setND --- XIC scalar store

            2.25 Manganese  ntests 570  fail 1 pass 569 pcc 99.824562 % 


1/1-10/09  various 3d plot revisions

           ---- need array cut to work for all types - done (except pan, str)


1/17/09   object array -- 

           BUG 34 {

              yn = Fd[i]->check(myfoodchoice)

            not parsed as CMF
           }

           ptrs to object array 
           object copy,ptr
           A=Fd[3:5]->check(myfoodchoice)
           return array of results for subset 3:5

2/1/09     paramexpand -- %(n,pre,sep,post)  for vector print
           done -- will take strings and variables (but not expressions)

2/15/09    CHECK CMF str return


2/15/09    BUG 35 {
              fmt %16s$a   not processed correctly - paraexpand feature not finished tested
           FIXED
           }


2/16/09    BUG 36 {

              lsr = !!" ls -lt"  --  shell command return failure
           3/1/09 FIXED  
           } 

2/16/09    REQ 13 {
              one-liners   --- asl -s   arg1 arg2 ...
              arg1,2 are treates as separate lines of a program
              BUG 37 in for { } misses first statement ??
             DONE
           } 


2/17/09    REQ 14 {
              asl -e  
              allows input lines to be read from terminal (stdin) until CNTRL D?
              then program is excuted (readline with editing ??)
              DONE
           }


2/22/09    REQ 15 {
               VMF gen  ===  I->gen(N,0,1) ; F->gen(N,0,1) ; C->gen(N,0,1) ; 

           }

2/22/09    REQ 16 {
               constructor arg
           }


2/22/09    REQ 17 {
               second pass on XIC --- call type specific routines 
            }

2/22/09 URGENT   REQ 18 {
               VMF   ---- I->op()   modifys I
                          I<-op()   modifys I
                          I-|op()   returns result of the operation leaves I unmodified
            }

2/26/09   REQ 19 {

                 long integer is now used in opera - when specified
                 long double TBD 4
                 pan type can be used for arbitary precision
          DONE
          }


03/01/09
              2.34 Selenium  ntests 669  fail 0 pass 669 pcc 100.000000 % 


03/01/09   REQ 20 {
             preprocessor for e.g.  ---- #define MAXSZ  1000   ---  DONE 3/8/09
             in preparation for enum --- added preprocessor 
             -- will take care of simple name  and replacement text 
             prep_e.c
             enum  will add into the known names for replacement by integer strings 
             in statements prior to IC
             macro expansion ??
             DONE
           }

03/03/09   SquareRoot Day  -- started on Key Class for use in Preprocessor

03/08/09   2.35 Bromine  tests 681  fail 0 pass 681 pcc 100.00% 

03/09/09   REQ 21 {
                 nested class   needs implementing
                 DONE
           } 

03/10/09
           REQ 22 {
                  smart pointer - reference
           }

03/15/09
           REQ 23 {

             want to reverse enum --- put in integer return name -    
             member_enum_name = revnum(enum_name,int)

           }

03/21/09   BUG 37 {
                proc return -- broke?
                func in arg overwriting St values
		FIXED
           } 

           2.36 Krypton  tests 662  fail 0 pass 662 pcc 100.00% 
           2.36 Krypton  tests 672  fail 0 pass 672 pcc 100.00% 
           // some tests not completing!

03/24/09   BUG 38  {
              CMF cons  XIC -- not recognizing end?
               -- and check oa, objivar  tests
              FIXED
           } 

           BUG 39 {
                 D->A[3]->type  parse
                 FIXED
           }

2.36 Krypton  tests 696  fail 0 pass 696 pcc 100.00% 


03/26/09

           REQ  24 {

                T[0:n:1] = pt(_i) 

                where the array T is assigned eval of pt() at index _i which goes from 0 to n in step 1

           }

           BUG 39 {
                  format print array
                  end char sequence in last row of multi-row print not seen
                  <<"%(4,\t{\s, ,\s}\n)%3d$A \n"
           FIXED
           } 

           BUG 40 {
                  redeclaration -- no error
                  int A[]
                  float A[] -- no error??
           FIXED                  
           } 

           added set_error to icode -- 


 2.36 Krypton  tests 705  fail 0 pass 705 pcc 100.00% 

          CHECK 1 {
           -- nested function calls
       
          DONE
          } 


          added PUSHI,PUSHF
  
          added memaddr, memfill, memcopy


          BUG 41 {
             array assignment within class?
          FIXED
          } 



          BUG 42 {
           <<"%v $n $(typeof(n))\n" 
           name appears twice
          }


03/31/09

          BUG 43 {
             array of objects within class?
             number is size +1
             access not working
          FIXED 
          } 



04/05/09

         Revise 1 {
            class member access via XIC
            currently using parset->objptr
            for statements like
            D[i]->A[j]->type
            want to pop off all object array specs from stack - to specify siv ptr to object member
            where we are executing a CMF from nested scope
            we will use an objptr that is on the stack

            currently the mechanism not likely parse CMF with CMF args references

         }

04/12/09

         2.36.7 Krypton  tests 800  fail 0 pass 800 pcc 100.00% 

          BUG 44 {
             array of objects within class?
             number is size +1
          }  

          BUG 45 {
             array of objects within class?
             following class define statement wrong
          FIXED
          }  

         BUG 46 {
           float F[10]
           Dil F[2]  // not seen as error!!
           FIXED
         } 


         Revise 2 {
                    use of svar subset ---- just use siv subset ??
                    and validate svar subscript operations
                    check via list
                  }

04/29/09
           REQ 25 {          
                   for list/svar  declaration of values 
                   comma at end of line - joins line -- continuation character not necessary
		   ? 1000 line 

                  }


05/02/09   REQ 26 {
                   HASH - object --- already can organize svar for key,value or key, record
                   and search by key --- want the hash version for faster indexing
                   this could be re-calculated as size grows



                  }

05/13/09     2.36.15 Krypton-Phosphorus  tests 891  fail 4 pass 887 pcc  99.55% 

           REQ 27 { asl -i 
                    tty  -- expression eval --- DONE 5/17/09
                    load ("foo.asl")  -- load/reload a script file  5/17/09
                    BUG not including prep of lines --- DONE 05/19/09

          
                  }

05/17/09
            2.36.17 Krypton-Chlorine  tests 919  fail 0 pass 919 pcc 100.00% 


            TBD 5 {
                   recheck/revise vector ops 
                   float vec opeq  (opequals) DONE
                  }



05/19/09    REQ 28 {  %(rowlen,pre,elesep,postrow,elesec) 
                      e.g.  %(10,<, ,>\n,2d)$V 
                      missing rowlen use n column in 2D
                   }



06/05/09    REQ 29 {
                    icode storer --- can be refined so that execution faster
                    vstorer --- vector to vector


                   }


06/11/09    BUG 47 {  
                      !( s @= "MSG"))
                      str cmp  negation gets wrong answer -- within class member function FIXED 
                      FIXED
                   } 

            REQ 30 {
                    preferred dec of str variable
                    should be string, Strv
                    DONE
            }


06/14/09    REQ 31 {
                    switch statement
                    DONE--alpha
            }


Validate     2.24 Helium-Chromium  tests 968  fail 2 pass 966 pcc  99.79% 

06/17/09

    added embedded switch test

Validate     2.25 Helium-Manganese  tests 982  fail 2 pass 980 pcc  99.80% 

06/17/09

              case 'a': case 'b':
              break;

              case hv('xyz'):

06/17/09  BUG 48 {  
                unary op on matrix  -A  
                FIXED 
               }
   
06/22/09  BUG 49 { V = T[-1:3]  -- did not get  reversed subset -- XIC worked}

06/22/09  REQ 32 { add in HTML color palette  --DONE
                   -- revise get_color_num,name --DONE
                   -- check room for grey scale
                   -- heat scale
                 }


07/03/09  REQ 33 {

                   add - sprintf --- DONE 
                   printf  --- DONE
                   fprintf --- DONE

                   make fmt consistent with asl paraexpand print fmt
                   allow $var paraexpand? within sprintf fmt string ?

                 }


07/25/09         enum --- need lookup of name via value
                 enum colors {
                             BLACK,
                             WHITE,
                             RED = 4,
                             GREEN,
                             BLUE,
                             }

                      colors->getName(0)   gets BLACK as str
                      colors->getIndex(RED)  gets 2 --- RED is third entry in enum
                      colors->getIndexName(3)   gets GREEN as str
                      colors->getIndexValue(3)   gets 5


08/02/09    REQ 34 {
                    include code needs to run at point of define
                    8/27/09 DONE 
                   }


09/21/09    2.34 Helium-Selenium  tests 902  fail 0 pass 902 pcc 100.00% 
09/23/09    2.34 Helium-Selenium  tests 957  fail 7 pass 950 pcc  99.27% 
09/24/09    2.34 Helium-Selenium  tests 973  fail 6 pass 967 pcc  99.38% 


11/03/09    FIX rdata fio.c will read until end of file and create buffer without a presize declaration
11/12/09    rework plot library wo funcs and XGS gwm wo funcs
11/13/09    rework audiolab
11/15/09    Msg class added event x,y
11/16/09    added pickc function returns an indexed char from a string
11/16/09    asl -i   the vsh now writes input/output to a history file vsh_<PID>.his - debug and reread??
11/16/09    fixed  char c = '\'' ; char d = '\\'
11/16/09    BUG 50 { case ':': fails   11/17/09 FIXED}
11/17/09    fixed an escape sequence bug in vector print e.g. <<"%(,->,\\,<-\n)$V \n"

11/17/09    reworking messages (PIPED) between ASL & XGS -- check the SRS mechanism 
            receives the correct message even with handshaking
            also that waiting for a specific event occurs ASL side - XGS will send over specific event when it occurs
            Replace pipes with sockets ? or code up an optional socket so we can use on a LAN network

11/18/09    findTokens -- standard delimiter is seen in quotes  --quoted option delimiter not seen in dquotes or squotes
11/18/09    BUG 51 { rn = foo('\'') --- seg fault }
 
11/20/09    BUG 52 { tag_args in XIC   FIXED}
11/20/09    reactivate showhelp for wo_help -- XGS processes pointer motion ( should ignore - most of these - only peek at some ?)
11/20/09    BUG 53 { ptr arg    XIC ? }
11/21/09    reorganize Wo's --- base Wo class -- different derived Wo types - Button, Text, Graph 
11/22/09    reactivate ASL_ERROR_WINDOW  XGS can view asl_errors
11/30/09    Sigb buffers use Siv as data container - can set to most types of data

12/03/09    scalar vector  -- BUG 54 { U =255 -V  - FIXED } -- BUG 55 { U = 255 - V[0:8:2] XIC FIXED }
            clip pixel spec revised -- ulc offset plus width height

12/04/09    added cmap index to vpc and plotpixrect - so we can use any subset (256) of the whole cmap
            do we need/have a vps ( short int) version to use more than 255 colors ? 

12/05/09    BUG 56 { oa, FIXED obcopy tests failing obj array reference?? }

            2.41 Helium-Niobium  tests 915  fail 17 pass 898 pcc  98.14% 
12/05/09    2.41 Helium-Niobium  tests 991  fail 4 pass 987 pcc  99.60% 
12/06/09    revise .lic format ---- class init instructions don't appear ?
12/08/09    backslash in print strings - revise token DQ,storeStringToChar
12/08/09    2.43 Helium-Technetium  tests 1042  fail 11 pass 1031 pcc  98.94% 
12/09/09    fix for reversed subrange arrays - FindVar needs revise -check list subrange

12/19/09    start revise of DSP --- (signals, filters)
            check white noise, gaussian, uniform, pink, green ?


12/27/09    aproundup bug? - pan   bug  P = 2 * P -- XIC
12/28/09    add ivalue to wo and msg --- very easy to switch on the ivalue in script --rather than a name or value string
12/29/09    fixed arg bug asl -cwl foo.asl -l 10 -c 20 (was seeing post script name args)
12/29/09    sayspec.asl crashes randomly during cursor selection
01/01/10    revised ioctl soundcard calls -- added getSoundParms()

01/09/10    fixed a class function array object parse error 
            BUG 57 {               }
01/09/10     REQ 35 { XIC logic expressions --- should exit as soon as evaluation is determined ( A || B) if A true no need to eval B }
            this was done in script first pass -- but not in XIC version

01/10/10  -- we are using tag,value args a lot gline,gwob, readrecord etc
             construct a class and method for this ? rather than this set of similar C functions

01/25/10     static inop? --- should be created as procname_varname -- stored with globals XIC needed - plus marked as once-only
01/28/10     static revised var_sindex first pass OK -- XIC fails -- oa XIC fails
             {
                used SSOO once only to prevent repeated execution of static declarations in functions -- 
                the variables are stored with globals --- need separate per thread -- so will need to
                check SSOO in thread context --- the XIC is currently wrong doesn't store init value -- ic statement order bug
                will need to make sure this works with member functions too!
                FIXED --- test static.asl
             }


02/03/10    BUG 58 { float TA[N*2] 
                     expression parse twice -- XIC repeated
                     FIXED?
                   }

02/12/10    added semaphores , revised mutex's, threadkill
02/14/10    BUG 59 { Data[2] = Data[1] -- XIC  --  }
02/20/10    need include guard mechanism -- against multiple includes and invalid code 
02/28/10    fix BUG 60 { FP[i] = fp ; where FP is a dynamic array not yet sized -- FIXED }
02/28/10    polygen done right -- polyncof
 
03/07/10    revised complex number set, get routines (polar form attribute -  comversion)
            fix scrolling text  -- want asl FFT demo using signal flow graphs

03/21/10    added axtext -- for placing text strings relative to axis
03/25/10    BUG 61 main var overshadows cmf/proc arg?
03/27/10    check plotss sscape/waterfall code - still in project but not used
03/27/10    matrix version of stats
04/04/10    BUG 62 - saw waveform?
04/04/10    trying PS scaling to get 300 dpi -- scale font not working -- 
04/10/10    scale font sortof working -- we use an increased resolution and factional scale to get more dots per inch 
04/10/10    REQ 36  { need PUSH_CMV - to break up PUSH_SIV (should fix BUG in obcopy) }
04/10/10    REQ 37  { msg win in XGS for display of ASL print --- XGS side done }
04/12/10    REQ 38  { this should work  (for (j = 0; j < (m=2^8); j++) {}  - m should be 8 and usable in side loop  }
04/22/10    REQ 39  { want regex search/replace option for ssub }
04/23/10    REQ 40  { redo terrain rendering functions }
04/23/10    REQ 41  { socket asl <---> xgs -  and UDP}
08/12/10    BUG 63  { FindSubSet 3D array -  FIXED}


08/13/10    2.73 Helium-Tantalum  tests 1201  fail 5 pass 1196 pcc  99.58% 
08/13/10   BUG 64  { foo(val++) - ?FPASS error ITOC OK, }
08/22/10    added VMF Limit function TBD -- make work for vector/ND arrays
08/23/10    added maxvalcoli, minvalcoli
09/03/10    added getRow,getCol, flipDim
09/06/10   BUG 65 { want int I[2][3] = { 1,2,3, 4,5,6} or { {1,2,3}, {4,5,6} }  to work }
09/06/10    REQ 64 { cmplx a = {3,4}  or cmplx a(3,4)  declarations to work }



12/14/10  -- port over to a redhat linux --- needed rework of makefile for fpic

12/27/10 4.8 Beryllium-Oxygen  tests 1166  fail 10 pass 1156 pcc  99.14% 
  ERROR --- FAIL ./consts_test 
  ERROR --- FAIL ./list 
  ERROR --- FAIL oa2 
  ERROR --- FAIL ./obcopy 


4/24/11

       need to fix   (a++, b--)  -- it is doing pre_increments for argument instead of passing value and then
       incrementing


Titanium
 4.22 I Titanium prgs 108  tests 640  fail 7 pass 633 ipcc  98.91% 

 4.22 OC Titanium prgs 110  tests 620  failx 9 passx 611 pcc  98.55% 

 4.22 Beryllium-Titanium  tests 1260  fail 16 pass 1244 pcc  98.73% 

   ERROR --- FAIL consts_test 
  ERROR --- FAIL ./consts_test 
  ERROR --- FAIL paraex 
  ERROR --- FAIL ./paraex 
  ERROR --- FAIL dynv0 
  ERROR --- FAIL ./dynv0 
  ERROR --- FAIL ./arrayarg2 
  ERROR --- FAIL ./list 
  ERROR --- FAIL oa2 
  ERROR --- FAIL ./obcopy 


5/15/11

///////////////////////////////////////////////////////////
Iron
 4.26 I Iron prgs 108  tests 639  fail 1 pass 638 ipcc  99.84% 

 4.26 OC Iron prgs 109  tests 635  failx 9 passx 626 pcc  98.58% 

 4.26 Beryllium-Iron  tests 1274  fail 10 pass 1264 pcc  99.22% 

   ERROR --- FAIL consts_test 
  ERROR --- FAIL ./consts_test 
  ERROR --- FAIL colors_enum 
  ERROR --- FAIL ./colors_enum 
  ERROR --- FAIL ./msquare 
  ERROR --- FAIL dynv0 
  ERROR --- FAIL ./dynv0 
  ERROR --- FAIL ./arrayarg2 
  ERROR --- FAIL ./list 
  ERROR --- FAIL ./obcopy 

//////////////////////////////////////////////////////////////////
10/2/11
// fixed list 'indexing'   L[-1] - shorthand to get last item in list
// proc array arg - is via reference

 4.35 I Bromine prgs 113  tests 672  fail 1 pass 671 ipcc  99.85% 

 4.35 OC Bromine prgs 113  tests 673  failx 3 passx 670 pcc  99.55% 

 4.35 Beryllium-Bromine  tests 1345  fail 4 pass 1341 pcc  99.70% 

   ERROR --- FAIL ./consts_test 
  ERROR --- FAIL oa2 
  ERROR --- FAIL ./oa2 
//////////////////////////////////////////////////////////////////
 Sat Oct  8 19:01:34 2011 

 4.36 I Krypton prgs 113  tests 693  fail 0 pass 693 ipcc 100.00% 

 4.36 OC Krypton prgs 113  tests 693  failx 2 passx 691 pcc  99.71% 

 4.36 Beryllium-Krypton  tests 1386  fail 2 pass 1384 pcc  99.86% 

   ERROR --- FAIL ./consts_test 
//////////////////////////////////////////////////////////////////  

12/24/11 4.39  point in poly, plot added symbols/points
12/25/11 4.39  for eclipse debug - need to have plot library as included library? 
12/25/11 4.39  also socket version for xgs display


03/17/12 4.42 added fread,fwrite asl versions

03/17/12 -- need icode pan operations 

03/21/12 -- added exchangeCols,exchangeRows isort -- working P=msort(M,row) for sort matrix dependent on row/col

03/24/12 -- added msortrow -- matrix is sorted via selected row

04/28/13 -- reworked Msg class

04/29/13 -- indirect function call  e.g. $foo()  fixed for XIC compile -- just marks it not to compile just re-interpret

04/30/13 -- added gfv VMF  method for obtaining field from Svar record

05/03/13 -- need to fix 3D graphing and audio

05/26/13  -- 4.62 added Svar hash table

05/28/13 -- if statement fails interpret stage - XIC marked as don't execute

05/30/13 -- want print to output text within  $() if preceeded by %v e.g. <<"%V$(a+b) \n"  --> a+b val 

11/17/13  -- debug error should state which file and line - only says line - made dberror a Parset function -- DONE


11/27/14   --- need smart ptr proc argument    foo(&X[2],&Y[3])  vec X is offset by 2 Y  by 3     

12/19/15 ---   added naviwindow asl function to setup and run file locator xgs naviwin via SendReceive mechanism
               need similar for query window  -  also error notification?
	       
